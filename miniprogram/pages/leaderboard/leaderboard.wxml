<!-- æ’è¡Œæ¦œé¡µé¢ -->
<view class="leaderboard-container">
  <!-- ä»Šæ—¥å’•ç‹ -->
  <view class="today-king-section" wx:if="{{todayKing}}">
    <view class="section-title">ğŸ‘‘ ä»Šæ—¥å’•ç‹ {{todayDate}}</view>
    <view class="king-card">
      <view class="king-avatar">
        <image 
          wx:if="{{todayKing.avatarUrl}}" 
          class="avatar-img" 
          src="{{todayKing.avatarUrl}}" 
          mode="aspectFill"
        />
        <view wx:else class="avatar-placeholder">ğŸ¦</view>
      </view>
      <view class="king-info">
        <view class="king-name">{{todayKing.nickName || 'ç¥ç§˜é¸½æ‰‹'}}</view>
        <view class="king-stats">
          <text class="stat-item">ä»Šæ—¥å’•å’•: {{todayKing.todayGuguCount}} æ¬¡</text>
          <text class="stat-item">å’•å’•ç‡: {{todayKing.guguRate}}%</text>
        </view>
        <view class="king-badge">ğŸ† æœ¬åœºæœ€ä½³é¸½å­</view>
      </view>
    </view>
  </view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <view class="leaderboard-section">
    <view class="section-title">ğŸ“Š å…¬å¼å¢™</view>
    <view class="leaderboard-list">
      <view 
        class="leaderboard-item {{item.isTodayKing ? 'king-item' : ''}}" 
        wx:for="{{leaderboard}}" 
        wx:key="rank"
      >
        <view class="rank-number {{item.rank <= 3 ? 'top-three' : ''}}">
          {{item.rank}}
        </view>
        
        <view class="user-avatar">
          <image 
            wx:if="{{item.avatarUrl}}" 
            class="avatar-img" 
            src="{{item.avatarUrl}}" 
            mode="aspectFill"
          />
          <view wx:else class="avatar-placeholder">ğŸ•Šï¸</view>
        </view>
        
        <view class="user-info">
          <view class="user-name">
            {{item.nickName || 'åŒ¿åç”¨æˆ·'}}
            <text class="king-icon" wx:if="{{item.isTodayKing}}">ğŸ‘‘</text>
          </view>
          <view class="user-stats">
            <text class="stat-tag">ä»Šæ—¥ {{item.todayGuguCount}} å’•</text>
            <text class="stat-rate">å’•å’•ç‡ {{item.guguRate}}%</text>
          </view>
        </view>
        
        <view class="dove-status-icon">
          <dove-avatar guguRate="{{item.guguRate}}" showStatus="{{false}}" size="small" />
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!isLoading && leaderboard.length === 0}}">
    <text class="empty-icon">ğŸ¦</text>
    <text class="empty-text">æš‚æ— æ’è¡Œæ¦œæ•°æ®</text>
    <text class="empty-hint">å¿«å»å‚ä¸æ´»åŠ¨ï¼Œæˆä¸ºå’•ç‹å§ï¼</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- åº•éƒ¨è¯´æ˜ -->
  <view class="footer-note">
    <text>ğŸ¯ å’•å’•ç‡ = (å’•å’•æ¬¡æ•° / å‚ä¸æ´»åŠ¨æ€»æ•°) Ã— 100%</text>
    <text>ç»å¸¸å’•å’•ä¼šè¢«å…¬ç¤ºåœ¨è¿™é‡Œå“¦ï¼</text>
  </view>
</view>
