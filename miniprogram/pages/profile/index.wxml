<view class="profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <button
      class="avatar-wrapper"
      open-type="chooseAvatar"
      bindchooseavatar="onChooseAvatar"
      wx:if="{{hasUserInfo}}"
    >
      <image
        wx:if="{{userInfo.avatarUrl}}"
        class="avatar"
        src="{{userInfo.avatarUrl}}"
        mode="aspectFill"
      />
      <view wx:else class="avatar avatar-placeholder">ğŸ‘¤</view>
    </button>
    <view wx:else class="avatar avatar-placeholder">ğŸ‘¤</view>
    
    <view class="user-info">
      <input type="nickname" class="nickname" placeholder="ç‚¹å‡»è®¾ç½®æ˜µç§°" 
             value="{{userInfo.nickName}}" bindchange="onNicknameChange" 
             wx:if="{{hasUserInfo}}" />
      <button class="login-btn" bindtap="getUserProfile" wx:else>ç‚¹å‡»ç™»å½•</button>
    </view>
  </view>

  <!-- é¸½å­å¤´åƒ -->
  <view class="dove-section" wx:if="{{hasUserInfo}}">
    <dove-avatar 
      guguRate="{{guguRate}}" 
      showStatus="{{true}}"
    />
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="stats-container">
    <view class="stats-card">
      <view class="stats-item">
        <text class="icon">ğŸŒ¸</text>
        <text class="label">å’•å’•ç‚¹æ•°</text>
        <text class="value">{{stats.regretPoints}}</text>
      </view>
      <view class="stats-item">
        <text class="icon">âœ¨</text>
        <text class="label">å‚ä¸æ´»åŠ¨</text>
        <text class="value">{{stats.totalEvents}}</text>
      </view>
      <view class="stats-item">
        <text class="icon">ğŸ€</text>
        <text class="label">å®Œæˆç‡</text>
        <text class="value">{{stats.participationRate}}</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½æŒ‰é’® -->
  <view class="action-list">
    <view class="action-item" bindtap="goToLeaderboard">
      <text class="icon">ğŸ†</text>
      <text class="text">å’•å’•æ’è¡Œæ¦œ</text>
      <text class="arrow">â¯</text>
    </view>
    <view class="action-item" bindtap="buyRegretPoints">
      <text class="icon">ğŸ’°</text>
      <text class="text">è´­ä¹°ç‚¹æ•°</text>
      <text class="arrow">â¯</text>
    </view>
    <view class="action-item" bindtap="goToFAQ">
      <text class="icon">ğŸ’</text>
      <text class="text">å¸¸è§é—®é¢˜</text>
      <text class="arrow">â¯</text>
    </view>
    <view class="action-item" bindtap="goToIntro">
      <text class="icon">ğŸ¯</text>
      <text class="text">ä½¿ç”¨è¯´æ˜</text>
      <text class="arrow">â¯</text>
    </view>
  </view>
</view>
