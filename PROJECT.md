# Gugu Calendar (å’•å’•æ—¥å†)

> å¾®ä¿¡å°ç¨‹åº - æ´»åŠ¨ç»„ç»‡ + é—®è´£æœºåˆ¶

## é¡¹ç›®ä¿¡æ¯

| Field | Value |
|-------|-------|
| **GitHub** | `JamesRRR/gugu-calendar` |
| **åˆ†æ”¯** | `feature/dove-avatar` |
| **çŠ¶æ€** | âœ… V2 å¼€å‘å®Œæˆ |
| **ä¼˜å…ˆçº§** | High |

## V2 åŠŸèƒ½ - é¸½å­å¤´åƒç³»ç»Ÿ + å…¬å¼å¢™

### âœ… å·²å®ŒæˆåŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| é¸½å­å¤´åƒç»„ä»¶ | âœ… | æ ¹æ®å’•å’•ç‡æ˜¾ç¤ºä¸åŒçŠ¶æ€ |
| å’•å’•ç‡è®¡ç®— | âœ… | (å’•å’•æ¬¡æ•° / å‚ä¸æ´»åŠ¨æ€»æ•°) Ã— 100% |
| æ’è¡Œæ¦œé¡µé¢ | âœ… | æŒ‰å’•å’•ç‡æ’åºï¼Œå±•ç¤ºä»Šæ—¥å’•ç‹ |
| å…¬å¼å¢™ | âœ… | è®½åˆºæœºåˆ¶ï¼Œå¹½é»˜è®¾è®¡ |
| getLeaderboard äº‘å‡½æ•° | âœ… | è·å–æ’è¡Œæ¦œæ•°æ® |

### é¸½å­å¤´åƒæ˜¾ç¤ºé€»è¾‘

| å’•å’•ç‡ | çŠ¶æ€ | Emoji |
|--------|------|-------|
| 0-5% | ç¾½æ¯›ä¸°æ»¡ | ğŸ•Šï¸ |
| 5-10% | é€æ¸è„±æ¯› | ğŸª¶ |
| â‰¥10% | å’•ç‹é©¾åˆ° | ğŸ¦ + ğŸ‘‘ |

### å…¬å¼å¢™åŠŸèƒ½

- ğŸ“Š å±•ç¤ºå’•å’•æœ€å¤šçš„äººï¼ˆæŒ‰å’•å’•ç‡æ’åºï¼‰
- ğŸ¥‡ **ä»Šæ—¥å’•ç‹** - å½“å¤©å’•å’•æ¬¡æ•°æœ€å¤šçš„äºº
- ğŸ¯ è®½åˆºæœºåˆ¶ï¼šç»å¸¸å’•å’•çš„äººä¼šè¢«å…¬ç¤º
- ğŸ’¬ è½»æ¾å¹½é»˜çš„è®¾è®¡

## æ–‡ä»¶ç»“æ„

```
gugu-calendar/
â”œâ”€â”€ miniprogram/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ dove-avatar/          # é¸½å­å¤´åƒç»„ä»¶
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ dove/                # é¸½å­å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ profile/             # ä¸ªäººä¸­å¿ƒï¼ˆå·²æ›´æ–°ï¼‰
â”‚   â”‚   â””â”€â”€ leaderboard/         # æ’è¡Œæ¦œé¡µé¢ï¼ˆæ–°å¢ï¼‰
â”‚   â””â”€â”€ app.json                 # å·²æ›´æ–°
â””â”€â”€ cloudfunctions/
    â””â”€â”€ getLeaderboard/         # æ’è¡Œæ¦œäº‘å‡½æ•°ï¼ˆæ–°å¢ï¼‰
```

## å¼€å‘è®°å½•

### 2026-02-07 - V2 åŠŸèƒ½å¼€å‘å®Œæˆ

- âœ… åˆ›å»ºé¸½å­å¤´åƒç»„ä»¶ `components/dove-avatar/`
- âœ… æ›´æ–° profile é¡µé¢ï¼Œæ·»åŠ é¸½å­å¤´åƒæ˜¾ç¤º
- âœ… åˆ›å»ºæ’è¡Œæ¦œé¡µé¢ `pages/leaderboard/`
- âœ… åˆ›å»º `getLeaderboard` äº‘å‡½æ•°
- âœ… æ›´æ–° `app.json` æ·»åŠ é¡µé¢å’Œç»„ä»¶é…ç½®
- âœ… å’•å’•ç‡è®¡ç®—é€»è¾‘ï¼š`guguRate = (guguCount / totalEvents) * 100%`

## æŠ€æœ¯å®ç°

### é¸½å­å¤´åƒç»„ä»¶ Props

```javascript
{
  guguRate: Number,      // å’•å’•ç‡ (0-100)
  showStatus: Boolean,   // æ˜¯å¦æ˜¾ç¤ºçŠ¶æ€æ–‡å­—
  size: String           // å°ºå¯¸ (small/medium)
}
```

### æ’è¡Œæ¦œæ•°æ®æ ¼å¼

```javascript
{
  todayKing: {
    nickName: String,
    avatarUrl: String,
    todayGuguCount: Number,
    guguRate: Number
  },
  leaderboard: [{
    rank: Number,
    nickName: String,
    todayGuguCount: Number,
    guguRate: Number,
    isTodayKing: Boolean
  }]
}
```

## éƒ¨ç½²è¯´æ˜

1. å¯¼å…¥å¾®ä¿¡å¼€å‘è€…å·¥å…· (`~/projects/gugu-calendar/`)
2. å¼€é€šäº‘å¼€å‘
3. ä¸Šä¼ å¹¶éƒ¨ç½² `getLeaderboard` äº‘å‡½æ•°
4. æµ‹è¯•é¸½å­å¤´åƒå’Œæ’è¡Œæ¦œåŠŸèƒ½

## ä¸‹ä¸€æ­¥

- [ ] æµ‹è¯• V2 åŠŸèƒ½
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] ä¼˜åŒ–åŠ¨ç”»æ•ˆæœ

## ğŸ§ª E2E è‡ªåŠ¨åŒ–æµ‹è¯• - âœ… å·²é…ç½®

| Field | Value |
|-------|-------|
| æµ‹è¯•æ¡†æ¶ | miniprogram-automator + Jest |
| æµ‹è¯•è„šæœ¬ | `npm run test:e2e` |
| æµ‹è¯•è¦†ç›–ç‡ | æ’è¡Œæ¦œé¡µã€ç”¨æˆ·é¡µ |
| é…ç½®æ–‡ä»¶ | `tests/jest.config.js` |

### è¿è¡Œæµ‹è¯•

```bash
cd tests
npm install
npm run test:e2e
```

### æµ‹è¯•æ–‡ä»¶

| æ–‡ä»¶ | æè¿° |
|------|------|
| `tests/e2e/leaderboard.spec.js` | æ’è¡Œæ¦œé¡µæµ‹è¯• |
| `tests/e2e/profile.spec.js` | ç”¨æˆ·é¡µæµ‹è¯• |

### æµ‹è¯•è¦†ç›–

- [x] é¡µé¢åŠ è½½æˆåŠŸ
- [x] ä»Šæ—¥å’•ç‹å±•ç¤º
- [x] æ’è¡Œæ¦œåˆ—è¡¨æ’åº
- [x] é¸½å­å¤´åƒçŠ¶æ€
- [x] å’•å’•ç‡è®¡ç®—
- [x] åŠŸèƒ½èœå•è·³è½¬

### ç›¸å…³æ–‡æ¡£
- [README.md](README.md) - æµ‹è¯•ä½¿ç”¨è¯´æ˜
